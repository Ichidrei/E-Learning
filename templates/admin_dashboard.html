<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>InQUIZition — Admin Dashboard</title>
  <style>
    :root{
      --bg:#0f1724; /* deep navy */
      --card:#0b1220;
      --muted:#9aa4b2;
      --accent:#7c5cff;
      --accent-2:#22c1c3;
      --glass: rgba(255,255,255,0.04);
      --glass-2: rgba(255,255,255,0.02);
      --radius:12px;
      --fw-700:700;
      --fw-600:600;
      color-scheme: dark;
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; background: linear-gradient(180deg,#071022 0%, #071827 60%); color:#e6eef8}

    /* Layout */
    .app{display:grid;grid-template-columns:260px 1fr;gap:24px;padding:28px;min-height:100vh}
    @media (max-width:900px){.app{grid-template-columns:1fr;padding:16px} .sidebar{position:relative;display:flex;flex-direction:row;overflow:auto;height:auto;padding:8px 0}}

    /* Sidebar */
    .sidebar{background:linear-gradient(180deg,var(--card), rgba(11,18,32,0.6));border-radius:16px;padding:20px;box-shadow:0 6px 20px rgba(2,6,23,0.6);height:calc(100vh - 56px);position:sticky;top:28px}
    .brand{display:flex;align-items:center;gap:12px;margin-bottom:18px}
    .logo{width:44px;height:44px;background:linear-gradient(135deg,var(--accent),var(--accent-2));border-radius:10px;display:grid;place-items:center;font-weight:800;font-size:18px}
    .brand h1{font-size:16px;margin:0}
    .nav{margin-top:8px}
    .nav a{display:flex;align-items:center;gap:10px;padding:10px;border-radius:10px;text-decoration:none;color:var(--muted);font-size:14px;margin-bottom:6px}
    .nav a.active, .nav a:hover{background:var(--glass);color:#fff}

    /* Main */
    .main{padding:6px 0}
    .topbar{display:flex;justify-content:space-between;align-items:center;margin-bottom:18px}
    .search{display:flex;align-items:center;gap:8px;background:var(--glass-2);padding:8px;border-radius:12px;width:min(540px,100%)}
    .search input{background:transparent;border:0;outline:none;color:inherit;font-size:14px;width:100%}
    .controls{display:flex;gap:12px;align-items:center}
    .btn{background:linear-gradient(90deg,var(--accent),#6c54ff);border:0;padding:10px 14px;border-radius:12px;color:white;font-weight:600;cursor:pointer}
    .ghost{background:transparent;border:1px solid rgba(255,255,255,0.06);padding:8px 12px;border-radius:10px;color:var(--muted)}

    /* Cards */
    .grid{display:grid;grid-template-columns:repeat(4,1fr);gap:16px;margin-bottom:18px}
    @media (max-width:1200px){.grid{grid-template-columns:repeat(2,1fr)}}
    @media (max-width:640px){.grid{grid-template-columns:1fr}}
    .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:16px;border-radius:var(--radius);box-shadow:0 6px 18px rgba(2,6,23,0.6)}
    .card h3{margin:0;font-size:13px;color:var(--muted)}
    .metric{font-size:22px;font-weight:700;margin-top:8px}
    .muted{color:var(--muted);font-size:13px}

    /* Chart placeholder */
    .chart{height:180px;border-radius:10px;padding:12px;background:linear-gradient(180deg, rgba(34,33,62,0.35), rgba(11,18,32,0.2));display:flex;flex-direction:column;gap:8px}
    .spark{flex:1}

    /* Table */
    .panel{margin-top:12px;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005));padding:14px;border-radius:12px}
    table{width:100%;border-collapse:collapse}
    th,td{padding:10px 8px;text-align:left;font-size:13px}
    thead th{color:var(--muted);font-weight:600;font-size:12px}
    tbody tr{border-top:1px solid rgba(255,255,255,0.02)}
    .progress{height:10px;background:rgba(255,255,255,0.04);border-radius:999px;overflow:hidden;width:120px}
    .progress > i{display:block;height:100%}

    /* small components */
    .chip{display:inline-block;padding:6px 8px;border-radius:999px;background:rgba(255,255,255,0.02);font-size:13px}

    /* footer */
    .footer{margin-top:20px;color:var(--muted);font-size:13px;text-align:center}

  </style>
</head>
<body>
  <div class="app">
    <aside class="sidebar">
      <div class="brand">
        <div class="logo">IQ</div>
        <div>
          <h1>InQUIZition</h1>
          <div class="muted">Admin dashboard</div>
        </div>
      </div>

      <nav class="nav">
        <a class="active">Overview</a>
      </nav>

      <div style="margin-top:16px">
        <button class="btn" style="width:100%">Create Quiz</button>
      </div>

      <div style="position:absolute;left:20px;right:20px;bottom:20px;font-size:12px;color:var(--muted);">
        InQUIZition
      </div>
    </aside>

    <main class="main">
      <div class="topbar">
        <div class="search">
        </div>
        <div class="controls">
          <button class="btn">Logout</button>
        </div>
      </div>

      <!-- Key metrics -->
      <section class="grid">
        <div class="card">
          <h3>Total users</h3>
          <div class="metric" id="totalUsers">1,248</div>
          <div class="muted">All-time registered users</div>
        </div>

        <div class="card">
          <h3>Active today</h3>
          <div class="metric" id="activeToday">164</div>
          <div class="muted">Users who attempted a quiz in last 24 hrs</div>
        </div>

        <div class="card">
          <h3>Average score</h3>
          <div class="metric" id="avgScore">78%</div>
          <div class="muted">Average across all quizzes</div>
        </div>

        <div class="card">
          <h3>Easy difficulty — average attempts</h3>
          <div class="metric" id="easyAvg">28</div>
          <div class="muted">Average number of attempts on 'Easy' before advancing</div>
        </div>
      </section>

      <div style="display:grid;grid-template-columns:1fr 420px;gap:16px;align-items:start">
        <div>
          <div class="panel card">
            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px">
              <div>
                <h2 style="margin:0;font-size:16px">Recent quiz sessions</h2>
                <div class="muted">Latest attempts across users</div>
              </div>
              <div>
                <select class="ghost" id="filterDifficulty">
                  <option value="all">All difficulties</option>
                  <option value="easy">Easy</option>
                  <option value="medium">Medium</option>
                  <option value="hard">Hard</option>
                </select>
              </div>
            </div>

            <table>
              <thead>
                <tr><th>User</th><th>Quiz</th><th>Score</th><th>Time</th><th>Progress</th></tr>
              </thead>
              <tbody id="sessionsTable">
                <!-- populated by JS -->
              </tbody>
            </table>
          </div>

          <div class="panel card" style="margin-top:12px">
            <h3 style="margin:0 0 8px 0">Question pool overview</h3>
            <div class="muted" style="margin-bottom:10px">Questions by tag and difficulty</div>
            <div style="display:flex;gap:12px;flex-wrap:wrap">
              <div class="chip">Algebra — 124</div>
              <div class="chip">Geometry — 86</div>
              <div class="chip">Calculus — 40</div>
              <div class="chip">Logic — 70</div>
            </div>
          </div>
        </div>

        <aside>
          <div class="card chart">
            <div style="display:flex;justify-content:space-between;align-items:center">
              <div>
                <h3 style="margin:0">Progression Rate</h3>
                <div class="muted">Average by 7 days</div>
              </div>
              <div class="muted">Users</div>
            </div>
            <canvas id="trafficChart" class="spark"></canvas>
          </div>

          <div class="card" style="margin-top:12px">
            <h3 style="margin:0">Quick stats</h3>
            <div style="display:flex;flex-direction:column;gap:8px;margin-top:10px">
              <div style="display:flex;justify-content:space-between"><div class="muted">Hint usage</div><div>23%</div></div>
              <div style="display:flex;justify-content:space-between"><div class="muted">Retake rate</div><div>14%</div></div>
              <div style="display:flex;justify-content:space-between"><div class="muted">Questions flagged</div><div>12</div></div>
            </div>
          </div>
        </aside>
      </div>

    </main>
  </div>

  <script>
    // Sample data (replace with real API/data)
    const sessions = [
      {user:'Alice G.', quiz:'Fractions 01', score:92, time:'2025-11-11 08:12', progress:90, difficulty:'easy'},
      {user:'Ben R.', quiz:'Algebra I', score:68, time:'2025-11-11 07:50', progress:68, difficulty:'medium'},
      {user:'Carla M.', quiz:'Geometry - angles', score:55, time:'2025-11-10 21:16', progress:55, difficulty:'easy'},
      {user:'Dante L.', quiz:'Calculus intro', score:43, time:'2025-11-09 18:04', progress:43, difficulty:'hard'},
      {user:'Eva P.', quiz:'Logic puzzles', score:78, time:'2025-11-08 15:32', progress:78, difficulty:'medium'}
    ];

    function renderSessions(filter){
      const tbody = document.getElementById('sessionsTable');
      tbody.innerHTML='';
      const data = filter && filter!=='all' ? sessions.filter(s=>s.difficulty===filter) : sessions;
      data.forEach(s=>{
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td>${s.user}</td>
          <td>${s.quiz}</td>
          <td>${s.score}%</td>
          <td style="white-space:nowrap">${s.time}</td>
          <td><div class="progress"><i style="width:${s.progress}% ; background:linear-gradient(90deg,var(--accent),var(--accent-2));"></i></div></td>
        `;
        tbody.appendChild(tr);
      });
    }

    // Simple sparkline chart using canvas
    function drawTraffic(){
      const c = document.getElementById('trafficChart');
      c.width = c.clientWidth; c.height = c.clientHeight;
      const ctx = c.getContext('2d');
      const values = [40,82,64,120,98,110,164]; // sample
      const max = Math.max(...values);
      const pad = 12;
      ctx.clearRect(0,0,c.width,c.height);
      ctx.beginPath();
      values.forEach((v,i)=>{
        const x = pad + (i/(values.length-1))*(c.width-2*pad);
        const y = c.height - pad - (v/max)*(c.height-2*pad);
        if(i===0) ctx.moveTo(x,y); else ctx.lineTo(x,y);
      });
      // stroke
      ctx.lineWidth=3; ctx.lineJoin='round'; ctx.lineCap='round';
      // gradient stroke
      const g = ctx.createLinearGradient(0,0,c.width,0);
      g.addColorStop(0,'#7c5cff'); g.addColorStop(1,'#22c1c3');
      ctx.strokeStyle = g; ctx.stroke();

      // fill area
      ctx.lineTo(c.width-pad, c.height-pad);
      ctx.lineTo(pad, c.height-pad);
      ctx.closePath();
      const g2 = ctx.createLinearGradient(0,0,0,c.height);
      g2.addColorStop(0,'rgba(124,92,255,0.12)'); g2.addColorStop(1,'rgba(34,193,195,0.02)');
      ctx.fillStyle = g2; ctx.fill();
    }

    // init
    renderSessions('all');
    drawTraffic();

    window.addEventListener('resize',()=>{ drawTraffic() });
    document.getElementById('filterDifficulty').addEventListener('change',(e)=>{ renderSessions(e.target.value) });

    // Expose a small API for quick editing in the browser console
    window.InQUIZ = {
      setStats(stats){
        if(stats.totalUsers) document.getElementById('totalUsers').textContent = stats.totalUsers;
        if(stats.activeToday) document.getElementById('activeToday').textContent = stats.activeToday;
        if(stats.avgScore) document.getElementById('avgScore').textContent = stats.avgScore + '%';
        if(stats.easyAvg) document.getElementById('easyAvg').textContent = stats.easyAvg;
      },
      setSessions(arr){
        // expects array of session objects
        while(sessions.length) sessions.pop(); arr.forEach(i=>sessions.push(i)); renderSessions(document.getElementById('filterDifficulty').value);
      }
    };

  </script>
</body>
</html>
